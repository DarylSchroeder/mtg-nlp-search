INFO:     Started server process [20402]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
🔄 Loading commander database from Scryfall...
🔍 Fetching commanders with query: 'legal:commander type:legendary type:creature'
📄 Page 10: 175 cards (total: 1750)
✅ Completed at page 15 (no more pages)
🔄 Processing 2547 commanders...
✅ Loaded 2547 commanders in 3.34s
📋 Found popular commanders: ['atraxa, grand unifier', 'chulane, teller of tales', 'korvold, fae-cursed king', "edgar, charmed groom // edgar markov's coffin", 'meren of clan nel toth']
📝 Alphabet coverage: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'É'] (27/26 letters)
🎉 Commander database loaded successfully in background
🔧 QueryBuilder parsing: 'counterspell'
🔧 Tokens: ['counterspell']
🔧 Found modifier: counterspell
🔧 Transformed to counterspell
🔧 Final filters: {'type': 'instant', 'scryfall_query': 'o:"counter target"'}
API: Extracted filters: {'type': 'instant', 'scryfall_query': 'o:"counter target"'}
API: Applied explicit commander constraint: COLORIDENTITY=WUBG
Scryfall query: game:paper (o:"counter target") type:instant COLORIDENTITY=WUBG
Found 336 total cards (showing page 1 with 175 cards)
API: Scryfall query: game:paper (o:"counter target") type:instant COLORIDENTITY=WUBG
API: Total results: 336
API: Requested page 1, fetching Scryfall page 1
API: Final filters: {'type': 'instant', 'scryfall_query': 'o:"counter target"', 'coloridentity': 'WUBG', 'is_commander_context': True}
Found 336 total cards, showing page 1/17
INFO:     127.0.0.1:35132 - "GET /search?prompt=counterspell&commander_colors=WUBG HTTP/1.1" 200 OK
🔧 QueryBuilder parsing: 'counterspell'
🔧 Tokens: ['counterspell']
🔧 Found modifier: counterspell
🔧 Transformed to counterspell
🔧 Final filters: {'type': 'instant', 'scryfall_query': 'o:"counter target"'}
API: Extracted filters: {'type': 'instant', 'scryfall_query': 'o:"counter target"'}
API: Applied explicit commander constraint: COLORIDENTITY=WUBG
Scryfall query: game:paper (o:"counter target") type:instant COLORIDENTITY=WUBG
Found 336 total cards (showing page 1 with 175 cards)
API: Scryfall query: game:paper (o:"counter target") type:instant COLORIDENTITY=WUBG
API: Total results: 336
API: Requested page 1, fetching Scryfall page 1
API: Final filters: {'type': 'instant', 'scryfall_query': 'o:"counter target"', 'coloridentity': 'WUBG', 'is_commander_context': True}
Found 336 total cards, showing page 1/17
INFO:     127.0.0.1:54194 - "GET /search?prompt=counterspell&commander_colors=WUBG HTTP/1.1" 200 OK
🔧 QueryBuilder parsing: 'counterspell'
🔧 Tokens: ['counterspell']
🔧 Found modifier: counterspell
🔧 Transformed to counterspell
🔧 Final filters: {'type': 'instant', 'scryfall_query': 'o:"counter target"'}
API: Extracted filters: {'type': 'instant', 'scryfall_query': 'o:"counter target"'}
API: Applied explicit commander constraint: COLORIDENTITY=WUBG
Scryfall query: game:paper (o:"counter target") type:instant COLORIDENTITY=WUBG
Found 336 total cards (showing page 1 with 175 cards)
API: Scryfall query: game:paper (o:"counter target") type:instant COLORIDENTITY=WUBG
API: Total results: 336
API: Requested page 1, fetching Scryfall page 1
API: Final filters: {'type': 'instant', 'scryfall_query': 'o:"counter target"', 'coloridentity': 'WUBG', 'is_commander_context': True}
Found 336 total cards, showing page 1/17
INFO:     127.0.0.1:54206 - "GET /search?prompt=counterspell&commander_colors=WUBG HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [20402]
